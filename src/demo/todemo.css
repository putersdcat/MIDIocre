/* ================================================= */
/* MIDIocre Demo Player — v3.3 FULL RETRO INTEGRATION */
/* Animated fuse sparks • Per-theme bomb colors • New transport buttons • Extra sickness */
/* 100% no-CDN, pure system fonts, copy-paste ready */
/* ================================================= */

[data-theme="midnight"] { --bg-body: #1a1a2e; --bg-card: #16213e; --bg-input: #0f3460; --bg-input-hover: #1a4a8a; --bg-viz: #0a1628; --text-primary: #e0e0e0; --text-secondary: #aaa; --text-muted: #888; --accent: #e94560; --accent-dim: rgba(233,69,96,0.3); --accent-glow: rgba(233,69,96,0.6); --border: #333; --shadow: rgba(0,0,0,0.4); }
[data-theme="synthwave"] { --bg-body: #0d0221; --bg-card: #150735; --bg-input: #240e4f; --bg-input-hover: #3a1a7a; --bg-viz: #08011a; --text-primary: #f0d0ff; --text-secondary: #b48ecf; --text-muted: #7a5a99; --accent: #ff2975; --accent-dim: rgba(255,41,117,0.3); --accent-glow: rgba(255,41,117,0.6); --border: #3a1a6a; --shadow: rgba(0,0,0,0.6); }
[data-theme="emerald"] { --bg-body: #0a1a0a; --bg-card: #0f2e1a; --bg-input: #1a4a2a; --bg-input-hover: #2a6a3a; --bg-viz: #061208; --text-primary: #c8f0d0; --text-secondary: #88b898; --text-muted: #5a8a6a; --accent: #00e676; --accent-dim: rgba(0,230,118,0.3); --accent-glow: rgba(0,230,118,0.6); --border: #1a3a2a; --shadow: rgba(0,0,0,0.5); }
[data-theme="frost"] { --bg-body: #e8ecf1; --bg-card: #f5f7fa; --bg-input: #dce3eb; --bg-input-hover: #c5d0dd; --bg-viz: #d0d8e2; --text-primary: #1a2a3a; --text-secondary: #4a5a6a; --text-muted: #7a8a9a; --accent: #2979ff; --accent-dim: rgba(41,121,255,0.2); --accent-glow: rgba(41,121,255,0.5); --border: #bcc8d8; --shadow: rgba(0,0,0,0.1); }
[data-theme="hakerman"] { --bg-body: #0a0a0a; --bg-card: #0d0d0d; --bg-input: #111; --bg-input-hover: #1a1a1a; --bg-viz: #050505; --text-primary: #33ff33; --text-secondary: #20cc20; --text-muted: #0f8a0f; --accent: #33ff33; --accent-dim: rgba(51,255,51,0.15); --accent-glow: rgba(51,255,51,0.5); --border: #1a2a1a; --shadow: rgba(0,255,0,0.08); }

* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
  background: var(--bg-body);
  color: var(--text-primary);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:2rem;
  transition:background .4s;
}

.wrapper {
  position:relative;
  border:8px solid #ff0044;
  box-shadow:0 0 80px #ff0044, inset 0 0 80px rgba(255,0,68,0.4);
  background:#110000;
  max-width:960px;
  width:100%;
  overflow:hidden;
}

.header {
  font-family:'Courier New', monospace;
  font-size:38px;
  color:#ff00ff;
  text-shadow:0 0 15px #ff00ff, 0 0 30px #ff00ff;
  letter-spacing:12px;
  text-align:center;
  padding:12px 0;
  background:#440000;
  border-bottom:6px solid #ff0044;
}

.footer {
  font-family:'Courier New', monospace;
  font-size:22px;
  color:#00ffcc;
  text-shadow:0 0 12px #00ffcc;
  letter-spacing:8px;
  text-align:center;
  padding:12px 0;
  background:#220000;
  border-top:6px solid #ff0044;
}

.bomb-svg { display:block; width:100%; height:auto; filter:drop-shadow(0 0 30px #00ffff); }

.scanlines {
  position:absolute; top:0; left:0; right:0; bottom:0;
  background:repeating-linear-gradient(to bottom, transparent 0px, transparent 4px, rgba(255,255,255,0.09) 4px, rgba(255,255,255,0.09) 8px);
  pointer-events:none; z-index:10;
  animation:scan 3.8s linear infinite;
}
@keyframes scan { 0% {background-position:0 0;} 100% {background-position:0 600px;} }

.crt {
  position:absolute; top:0; left:0; right:0; bottom:0;
  box-shadow:inset 0 0 140px rgba(0,0,0,0.95);
  pointer-events:none; z-index:5;
}

/* Inner app */
#app {
  background:var(--bg-card);
  padding:2rem;
  margin:0 20px 20px 20px;
  box-shadow:none;
}

/* v3.3 NEW TRANSPORT BUTTONS */
.transport {
  justify-content:center;
  gap:8px;
  flex-wrap:wrap;
}
.transport-btn {
  width:56px; height:56px;
  border:3px solid var(--accent);
  background:var(--bg-input);
  color:var(--accent);
  font-size:1.6rem;
  border-radius:4px;
  cursor:pointer;
  transition:all .1s;
  box-shadow:0 0 12px var(--accent-glow);
}
.transport-btn:hover {
  transform:scale(1.12);
  box-shadow:0 0 25px var(--accent-glow);
}
.play-btn { font-size:2rem; }
#play-led {
  width:18px; height:18px;
  background:#111;
  border:2px solid var(--accent);
  border-radius:50%;
  align-self:center;
  margin-left:10px;
  transition:all .2s;
}

/* Other original styles (kept 100% from your repo) */
header { text-align:center; margin-bottom:1.5rem; }
header h1 { font-size:1.8rem; color:var(--accent); margin-bottom:0.25rem; }
.tagline { font-size:0.85rem; color:var(--text-muted); font-style:italic; }
.header-controls { display:flex; justify-content:center; margin-top:0.75rem; gap:0.5rem; }
.theme-picker { display:flex; gap:4px; background:var(--bg-input); border-radius:8px; padding:3px; }
.theme-btn {
  width:32px; height:32px; border:none; border-radius:6px; background:transparent;
  font-size:1rem; cursor:pointer; transition:all .2s; display:flex; align-items:center; justify-content:center; opacity:0.6;
}
.theme-btn:hover { background:var(--bg-input-hover); opacity:0.9; transform:scale(1.1); }
.theme-btn.active { background:var(--accent-dim); opacity:1; box-shadow:0 0 8px var(--accent-glow); }

#controls { display:flex; flex-direction:column; gap:1rem; margin-bottom:1.5rem; }
.dropdowns { display:flex; gap:1rem; flex-wrap:wrap; width:100%; }
.dropdowns label { display:flex; flex-direction:column; gap:0.25rem; flex:1; min-width:180px; font-size:0.8rem; color:var(--text-secondary); }
.dropdowns select {
  padding:0.5rem; border-radius:6px; border:1px solid var(--border);
  background:var(--bg-input); color:var(--text-primary); font-size:0.9rem; cursor:pointer;
}
.dropdowns select:hover { border-color:var(--accent); }

.viz-container {
  text-align:center; padding:2rem; color:var(--accent); font-size:1.1rem;
  border:2px solid var(--border); background:var(--bg-viz); border-radius:4px;
}

.soundfont-builder { margin-top:2rem; }
.soundfont-builder h2 { color:var(--accent); margin-bottom:1rem; }
.builder-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:1rem; }
.builder-grid > div { background:var(--bg-input); padding:1rem; border-radius:6px; border:1px solid var(--border); }
.clear-btn, .build-btn {
  margin-top:1rem; padding:0.5rem 1rem; background:var(--accent); color:#000; border:none;
  border-radius:4px; cursor:pointer; font-weight:bold;
}

/* v3.3 FUSE SPARKS ANIMATION */
.spark {
  animation:fuseSpark 0.65s ease-in-out infinite alternate;
}
@keyframes fuseSpark {
  0%   { opacity:0.3; transform:scale(0.6); }
  100% { opacity:1; transform:scale(1.4); }
}
#flame {
  animation:flameFlicker 0.12s linear infinite alternate;
}
@keyframes flameFlicker {
  0%   { ry:18; rx:9; opacity:0.85; }
  100% { ry:22; rx:11; opacity:1; }
}